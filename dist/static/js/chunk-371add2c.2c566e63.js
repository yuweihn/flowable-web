(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-371add2c"],{"13d5":function(t,e,r){"use strict";var n=r("23e7"),o=r("d58f").left,a=r("a640"),i=r("ae40"),u=r("2d00"),s=r("605d"),c=a("reduce"),l=i("reduce",{1:0}),d=!s&&u>79&&u<83;n({target:"Array",proto:!0,forced:!c||!l||d},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1538:function(t,e,r){"use strict";r.d(e,"h",(function(){return o})),r.d(e,"f",(function(){return a})),r.d(e,"b",(function(){return i})),r.d(e,"g",(function(){return u})),r.d(e,"n",(function(){return s})),r.d(e,"o",(function(){return c})),r.d(e,"k",(function(){return l})),r.d(e,"j",(function(){return d})),r.d(e,"e",(function(){return f})),r.d(e,"l",(function(){return m})),r.d(e,"a",(function(){return p})),r.d(e,"m",(function(){return h})),r.d(e,"c",(function(){return b})),r.d(e,"d",(function(){return g})),r.d(e,"i",(function(){return w}));var n=r("b775");function o(t){return Object(n["a"])({url:"/flowable/definition/list",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/flowable/definition/info/by-deploy-id",method:"get",params:{deployId:t}})}function i(t,e){return Object(n["a"])({url:"/flowable/definition/start/"+t,method:"post",data:e})}function u(t){return Object(n["a"])({url:"/flowable/task/processVariables/"+t,method:"get"})}function s(t){return Object(n["a"])({url:"/flowable/definition/updateState",method:"put",params:t})}function c(t){return Object(n["a"])({url:"/flowable/definition/userList",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/flowable/definition/roleList",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/flowable/definition/readXml/"+t,method:"get"})}function f(t){return Object(n["a"])({url:"/flowable/task/flowViewer/"+t,method:"get"})}function m(t){return Object(n["a"])({url:"/flowable/definition/save",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function p(t){return Object(n["a"])({url:"/system/deployment",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/system/deployment",method:"put",data:t})}function b(t){return Object(n["a"])({url:"/flowable/definition/"+t,method:"delete"})}function g(t){return Object(n["a"])({url:"/system/deployment/export",method:"get",params:t})}function w(t){return Object(n["a"])({url:"/flowable/definition/deploy-to-def-id",method:"get",params:t})}},2638:function(t,e,r){"use strict";function n(){return n=Object.assign||function(t){for(var e,r=1;r<arguments.length;r++)for(var n in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)}var o=["attrs","props","domProps"],a=["class","style","directives"],i=["on","nativeOn"],u=function(t){return t.reduce((function(t,e){for(var r in e)if(t[r])if(-1!==o.indexOf(r))t[r]=n({},t[r],e[r]);else if(-1!==a.indexOf(r)){var u=t[r]instanceof Array?t[r]:[t[r]],c=e[r]instanceof Array?e[r]:[e[r]];t[r]=u.concat(c)}else if(-1!==i.indexOf(r))for(var l in e[r])if(t[r][l]){var d=t[r][l]instanceof Array?t[r][l]:[t[r][l]],f=e[r][l]instanceof Array?e[r][l]:[e[r][l]];t[r][l]=d.concat(f)}else t[r][l]=e[r][l];else if("hook"==r)for(var m in e[r])t[r][m]=t[r][m]?s(t[r][m],e[r][m]):e[r][m];else t[r]=e[r];else t[r]=e[r];return t}),{})},s=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}};t.exports=u},"3ab9":function(t,e,r){"use strict";r.d(e,"f",(function(){return o})),r.d(e,"k",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"n",(function(){return u})),r.d(e,"a",(function(){return s})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return l})),r.d(e,"j",(function(){return d})),r.d(e,"i",(function(){return f})),r.d(e,"g",(function(){return m})),r.d(e,"l",(function(){return p})),r.d(e,"m",(function(){return h})),r.d(e,"h",(function(){return b}));var n=r("b775");function o(t){return Object(n["a"])({url:"/flowable/form/list",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/flowable/form/"+t,method:"get"})}function i(t){return Object(n["a"])({url:"/flowable/form",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/flowable/form",method:"put",data:t})}function s(t){return Object(n["a"])({url:"/flowable/form/addDeployForm",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/flowable/form/"+t,method:"delete"})}function l(t){return Object(n["a"])({url:"/flowable/form/export",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/system/customer/option-list",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/system/order/drop-down-list",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/system/impl/order/related/info",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/system/order/info",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/system/order/customer/unbound-contract/order/drop-down-list",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/system/config/ags-company/drop-down-list",method:"get",params:t})}},"589b":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("bpmn-modeler",{ref:"refNode",attrs:{xml:t.xmlData,"is-view":!0,taskList:t.taskData}})],1)},o=[],a=r("ae3a"),i={name:"Flow",components:{bpmnModeler:a["a"]},props:{xmlData:{type:String,default:""},taskData:{type:Array,default:function(){return[]}}},data:function(){return{}}},u=i,s=r("0c7c"),c=Object(s["a"])(u,n,o,!1,null,null,null);e["default"]=c.exports},"5fd5":function(t,e,r){"use strict";r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return a})),r.d(e,"a",(function(){return i})),r.d(e,"f",(function(){return u})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return c}));var n=r("b775");function o(t){return Object(n["a"])({url:"/system/customer/list",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/system/sale/customer/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/system/customer/create",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function u(t){return Object(n["a"])({url:"/system/customer/update",method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function s(t){return Object(n["a"])({url:"/system/customer/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:t})}function c(t){return Object(n["a"])({url:"/system/customer/sale-customers",method:"get",params:t})}},"649e":function(t,e,r){"use strict";r("d6b8")},6881:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return a}));var n=r("b775");function o(){return Object(n["a"])({url:"/system/product/port/options",method:"get",params:{}})}function a(){return Object(n["a"])({url:"/system/product/device/options",method:"get",params:{}})}},"6e55":function(t,e,r){"use strict";r.d(e,"g",(function(){return o})),r.d(e,"f",(function(){return a})),r.d(e,"e",(function(){return i})),r.d(e,"h",(function(){return u})),r.d(e,"d",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"i",(function(){return l})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return f}));var n=r("b775");r("3fd3");function o(t){return Object(n["a"])({url:"/flowable/task/finishedList",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/flowable/task/flowRecord",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/flowable/task/form",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/flowable/task/revokeProcess",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/system/deployment/"+t,method:"get"})}function c(t){return Object(n["a"])({url:"/system/deployment",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/system/deployment",method:"put",data:t})}function d(t){return Object(n["a"])({url:"/system/deployment/"+t,method:"delete"})}function f(t){return Object(n["a"])({url:"/system/deployment/export",method:"get",params:t})}},"76e0":function(t,e,r){"use strict";r.d(e,"e",(function(){return o})),r.d(e,"a",(function(){return a})),r.d(e,"k",(function(){return i})),r.d(e,"d",(function(){return u})),r.d(e,"f",(function(){return s})),r.d(e,"b",(function(){return c})),r.d(e,"g",(function(){return l})),r.d(e,"j",(function(){return d})),r.d(e,"c",(function(){return f})),r.d(e,"h",(function(){return m})),r.d(e,"i",(function(){return p}));var n=r("b775");function o(t){return Object(n["a"])({url:"/flowauth/widget/list",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/flowauth/widget/create",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function i(t){return Object(n["a"])({url:"/flowauth/widget/update",method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function u(t){return Object(n["a"])({url:"/flowauth/widget/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:t})}function s(t){return Object(n["a"])({url:"/flowauth/node/list",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/flowauth/node/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:t})}function l(t){return Object(n["a"])({url:"/flowauth/node/setting/list",method:"get",params:t})}function d(t,e,r){return Object(n["a"])({url:"/flowauth/node/setting/"+t+"/"+e,method:"post",data:r})}function f(t){return Object(n["a"])({url:"/flowauth/node/setting/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:t})}function m(t){return Object(n["a"])({url:"/flowauth/node/task/setting/list",method:"get",params:{taskId:t}})}function p(t){return Object(n["a"])({url:"/flowauth/node/start-task/setting/list",method:"get",params:{taskId:t}})}},9977:function(t,e,r){var n={"./el-button.js":"aace","./el-checkbox-group.js":"9413","./el-input.js":"167d","./el-radio-group.js":"2cfa","./el-select.js":"7f29","./el-upload.js":"0f88"};function o(t){var e=a(t);return r(e)}function a(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=a,t.exports=o,o.id="9977"},c0c7:function(t,e,r){"use strict";r.d(e,"i",(function(){return a})),r.d(e,"e",(function(){return i})),r.d(e,"a",(function(){return u})),r.d(e,"k",(function(){return s})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return l})),r.d(e,"j",(function(){return d})),r.d(e,"b",(function(){return f})),r.d(e,"g",(function(){return m})),r.d(e,"l",(function(){return p})),r.d(e,"m",(function(){return h})),r.d(e,"n",(function(){return b})),r.d(e,"h",(function(){return g})),r.d(e,"f",(function(){return w}));var n=r("b775"),o=r("c38a");function a(t){return Object(n["a"])({url:"/system/user/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/system/user/"+Object(o["f"])(t),method:"get"})}function u(t){return Object(n["a"])({url:"/system/user",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/system/user",method:"put",data:t})}function c(t){return Object(n["a"])({url:"/system/user/"+t,method:"delete"})}function l(t){return Object(n["a"])({url:"/system/user/export",method:"get",params:t})}function d(t,e){var r={userId:t,password:e};return Object(n["a"])({url:"/system/user/resetPwd",method:"put",data:r})}function f(t,e){var r={userId:t,status:e};return Object(n["a"])({url:"/system/user/changeStatus",method:"put",data:r})}function m(){return Object(n["a"])({url:"/system/user/profile",method:"get"})}function p(t){return Object(n["a"])({url:"/system/user/profile",method:"put",data:t})}function h(t,e){var r={oldPassword:t,newPassword:e};return Object(n["a"])({url:"/system/user/profile/updatePwd",method:"put",params:r})}function b(t){return Object(n["a"])({url:"/system/user/profile/avatar",method:"post",data:t})}function g(){return Object(n["a"])({url:"/system/user/importTemplate",method:"get"})}function w(t){return Object(n["a"])({url:"/system/user/role-user/drop-down-list",method:"get",params:t})}},d58f:function(t,e,r){var n=r("1c0b"),o=r("7b0b"),a=r("44ad"),i=r("50c4"),u=function(t){return function(e,r,u,s){n(r);var c=o(e),l=a(c),d=i(c.length),f=t?d-1:0,m=t?-1:1;if(u<2)while(1){if(f in l){s=l[f],f+=m;break}if(f+=m,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=m)f in l&&(s=r(s,l[f],f,c));return s}};t.exports={left:u(!1),right:u(!0)}},d6b8:function(t,e,r){},e099:function(t,e,r){"use strict";r.d(e,"h",(function(){return o})),r.d(e,"a",(function(){return a})),r.d(e,"j",(function(){return i})),r.d(e,"b",(function(){return u})),r.d(e,"k",(function(){return s})),r.d(e,"i",(function(){return c})),r.d(e,"f",(function(){return l})),r.d(e,"g",(function(){return d})),r.d(e,"e",(function(){return f})),r.d(e,"c",(function(){return m})),r.d(e,"d",(function(){return p}));var n=r("b775");r("3fd3");function o(t){return Object(n["a"])({url:"/flowable/task/todoList",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/flowable/task/is-start-node",method:"get",params:t})}function i(t,e){return Object(n["a"])({url:"/flowable/task/restart",method:"post",params:{taskId:t},data:e})}function u(t){return Object(n["a"])({url:"/flowable/task/complete/v2",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/flowable/task/return",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function c(t){return Object(n["a"])({url:"/flowable/task/reject",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/flowable/task/returnList",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/flowable/task/returnTask",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/system/deployment/"+t,method:"get"})}function m(t){return Object(n["a"])({url:"/system/deployment/"+t,method:"delete"})}function p(t){return Object(n["a"])({url:"/system/deployment/export",method:"get",params:t})}},edbf:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"表单信息",name:"first"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",{staticClass:"el-icon-document"},[t._v("表单信息")])]),r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.goBack}},[t._v("返回")])],1),r("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{span:20,offset:2}},[r("div",[r("parser",{key:(new Date).getTime(),attrs:{"form-conf":t.variablesData},on:{submit:t.submitForm}})],1),"order"==t.isShowOrderForm?r("div",[r("orderForm",{ref:"formValue",attrs:{taskFormValue:t.taskFormValue,flowAuthSettingList:t.flowAuthSettingList,isStart:t.isStart,isDetail:t.isDetail}})],1):t._e(),"contract"==t.isShowOrderForm?r("div",[r("contractForm",{ref:"formValue",attrs:{taskFormValue:t.taskFormValue,flowAuthSettingList:t.flowAuthSettingList,isStart:t.isStart,isDetail:t.isDetail}})],1):t._e(),"impl"==t.isShowOrderForm?r("div",[r("implForm",{ref:"formValue",attrs:{taskFormValue:t.taskFormValue,flowAuthSettingList:t.flowAuthSettingList,isStart:t.isStart,isDetail:t.isDetail}})],1):t._e(),r("div",{staticStyle:{"margin-left":"10%","margin-bottom":"20px","font-size":"14px"}},[r("el-button",{attrs:{icon:"el-icon-edit-outline",type:"success",size:"mini"},on:{click:t.handleComplete}},[t._v(t._s(1==t.isStartNode?"提交":"审批"))]),t.isStartNode?t._e():r("el-button",{attrs:{icon:"el-icon-refresh-left",type:"warning",size:"mini"},on:{click:t.handleReturn}},[t._v("退回")])],1)])],1)],1),r("el-tab-pane",{attrs:{label:"审批记录",name:"second"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",{staticClass:"el-icon-notebook-1"},[t._v("审批记录")])]),t.flowRecordList?r("el-card",{staticClass:"box-card"},[r("el-col",{attrs:{span:16,offset:4}},[r("div",{staticClass:"block"},[r("el-timeline",t._l(t.flowRecordList,(function(e,n){return r("el-timeline-item",{key:n,attrs:{icon:t.setIcon(e.finishTime),color:t.setColor(e.finishTime)}},[r("p",{staticStyle:{"font-weight":"700"}},[t._v(t._s(e.taskName))]),r("el-card",{attrs:{"body-style":{padding:"10px"}}},[e.assigneeName?r("label",{staticStyle:{"font-weight":"normal","margin-right":"30px"}},[t._v("实际办理： "+t._s(e.assigneeName)+" "),r("el-tag",{attrs:{type:"info",size:"mini"}},[t._v(t._s(e.deptName))])],1):t._e(),e.candidate?r("label",{staticStyle:{"font-weight":"normal","margin-right":"30px"}},[t._v("候选办理： "+t._s(e.candidate))]):t._e(),r("label",{staticStyle:{"font-weight":"normal"}},[t._v("接收时间： ")]),r("label",{staticStyle:{color:"#8a909c","font-weight":"normal"}},[t._v(t._s(t.parseTime(e.createTime)))]),e.finishTime?r("label",{staticStyle:{"margin-left":"30px","font-weight":"normal"}},[t._v("办结时间： ")]):t._e(),r("label",{staticStyle:{color:"#8a909c","font-weight":"normal"}},[t._v(t._s(t.parseTime(e.finishTime)))]),e.duration?r("label",{staticStyle:{"margin-left":"30px","font-weight":"normal"}},[t._v("耗时： ")]):t._e(),r("label",{staticStyle:{color:"#8a909c","font-weight":"normal"}},[t._v(t._s(e.duration))]),e.comment?r("p",["1"===e.comment.type?r("el-tag",{attrs:{type:"success"}},[t._v(" "+t._s(e.comment.comment))]):t._e(),"2"===e.comment.type?r("el-tag",{attrs:{type:"warning"}},[t._v(" "+t._s(e.comment.comment))]):t._e(),"3"===e.comment.type?r("el-tag",{attrs:{type:"danger"}},[t._v(" "+t._s(e.comment.comment))]):t._e()],1):t._e()])],1)})),1)],1)])],1):t._e()],1),r("el-tab-pane",{attrs:{label:"流程图",name:"third"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",{staticClass:"el-icon-picture-outline"},[t._v("流程图")])]),r("el-card",{staticClass:"box-card"},["third"==t.activeName?r("flow",{attrs:{xmlData:t.xmlData,taskData:t.taskList}}):t._e()],1)],1)],1),r("el-dialog",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{title:t.completeTitle,visible:t.completeOpen,width:"600px","append-to-body":""},on:{"update:visible":function(e){t.completeOpen=e}}},[r("el-form",{ref:"taskForm",attrs:{model:t.taskForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"处理意见",prop:"comment",rules:[{required:!0,message:"请输入处理意见",trigger:"blur"}]}},[r("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",rows:6,autocomplete:"off",clearable:""},model:{value:t.taskForm.comment,callback:function(e){t.$set(t.taskForm,"comment",e)},expression:"taskForm.comment"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.completeOpen=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.taskComplete}},[t._v("确 定")])],1)],1),r("el-dialog",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{title:t.returnTitle,visible:t.returnOpen,width:"550px","append-to-body":""},on:{"update:visible":function(e){t.returnOpen=e}}},[r("el-form",{ref:"returnForm",attrs:{model:t.returnForm,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"退回节点",prop:"targetKey",rules:[{required:!0,message:"请选择退回节点",trigger:"blur"}]}},[r("el-radio-group",{model:{value:t.returnForm.targetKey,callback:function(e){t.$set(t.returnForm,"targetKey",e)},expression:"returnForm.targetKey"}},t._l(t.returnTaskList,(function(e){return r("el-radio-button",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1)],1),r("el-form-item",{attrs:{label:"退回意见",prop:"comment",rules:[{required:!0,message:"请输入退回意见",trigger:"blur"}]}},[r("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",rows:6,placeholder:"请输入退回意见"},model:{value:t.returnForm.comment,callback:function(e){t.$set(t.returnForm,"comment",e)},expression:"returnForm.comment"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.returnOpen=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.submitReturnTask}},[t._v("确 定")])],1)],1),r("el-dialog",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{title:t.rejectTitle,visible:t.rejectOpen,width:"550px","append-to-body":""},on:{"update:visible":function(e){t.rejectOpen=e}}},[r("el-form",{ref:"taskForm",attrs:{model:t.taskForm,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"驳回意见",prop:"comment",rules:[{required:!0,message:"请输入驳回意见",trigger:"blur"}]}},[r("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",rows:4,placeholder:"请输入意见"},model:{value:t.taskForm.comment,callback:function(e){t.$set(t.taskForm,"comment",e)},expression:"taskForm.comment"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.rejectOpen=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.taskReject}},[t._v("确 定")])],1)],1)],1)},o=[],a=(r("d3b7"),r("ddb0"),r("6e55")),i=r("9f75"),u=r("fd31"),s=r("872a"),c=r("319d"),l=r("1538"),d=r("e099"),f=r("589b"),m=r("76e0"),p={name:"TodoTask",components:{parser:i["a"],flow:f["default"],orderForm:u["a"],contractForm:s["a"],implForm:c["a"]},data:function(){return{loading:!1,taskId:null,returnForm:{targetKey:null,comment:null},taskForm:{deployId:"",procInsId:"",taskId:"",comment:"同意",vars:"",targetKey:"",values:{}},isStartNode:!1,variablesData:{},returnTaskList:[],completeTitle:null,completeOpen:!1,returnTitle:null,returnOpen:!1,rejectOpen:!1,rejectTitle:null,flowRecordList:[],xmlData:"",taskList:[],taskFormValue:{},isShowOrderForm:"order",flowAuthSettingList:[],isStart:!1,isDetail:!1,activeName:"first"}},created:function(){},mounted:function(){var t=this;this.taskForm.deployId=this.$route.query&&this.$route.query.deployId,this.taskForm.procInsId=this.$route.query&&this.$route.query.procInsId,this.taskId=this.$route.query&&this.$route.query.taskId,this.taskForm.taskId=this.$route.query&&this.$route.query.taskId;var e=this.$route.query&&this.$route.query.category;this.isShowOrderForm=e,this.getFlowAuthSettingList(this.taskId),this.checkIfStartTask(this.taskForm.taskId),this.getFlowRecordList(this.taskForm.procInsId),this.taskForm.procInsId&&this.getFlowViewer(this.taskForm.procInsId).then((function(e){t.getModelDetail(t.taskForm.deployId)}))},methods:{getModelDetail:function(t){var e=this;return new Promise((function(r,n){Object(l["j"])(t).then((function(t){e.xmlData=t.data,r(e.xmlData)})).catch((function(t){n()}))}))},getFlowViewer:function(t){var e=this;return new Promise((function(r,n){Object(l["e"])(t).then((function(t){e.taskList=t.data,r(e.taskList)})).catch((function(t){n()}))}))},setIcon:function(t){return t?"el-icon-check":"el-icon-time"},setColor:function(t){return t?"#2bc418":"#b3bdbb"},checkIfStartTask:function(t){var e=this;Object(d["a"])({taskId:t}).then((function(r){e.isStartNode=r.data,Object(l["g"])(t).then((function(t){e.taskFormValue=t.data,e.variablesData=t.data.variables,e.isStartNode&&(e.variablesData.disabled=!1,e.variablesData.formBtns=!0)})).catch((function(){}))})).catch((function(t){}))},getFlowRecordList:function(t){var e=this,r={procInsId:t};Object(a["f"])(r).then((function(t){e.flowRecordList=t.data})).catch((function(t){e.goBack()}))},handleComplete:function(){this.completeOpen=!0,this.completeTitle="审批流程",this.resetForm("taskForm")},taskComplete:function(){var t=this;this.$refs.taskForm.validate((function(e){e&&t.$nextTick((function(){t.loading=!0,t.taskForm.values=t.$refs.formValue.FormData,Object(d["b"])(t.taskForm).then((function(e){t.loading=!1,t.msgSuccess(e.msg),t.goBack()})).catch((function(){t.loading=!1}))}))}))},handleDelegate:function(){},handleAssign:function(){},goBack:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.go(-1)},submitForm:function(t){var e=this;if(t){var r=t.valData,n=t.formData;n.disabled=!0,n.formBtns=!1,r.variables=n,Object(d["j"])(this.taskForm.taskId,JSON.stringify(r)).then((function(t){e.msgSuccess(t.msg),e.goBack()})).catch((function(){}))}},handleReject:function(){this.rejectOpen=!0,this.rejectTitle="驳回流程",this.resetForm("taskForm")},taskReject:function(){var t=this;this.$refs["taskForm"].validate((function(e){e&&Object(d["i"])(t.taskForm).then((function(e){t.msgSuccess(e.msg),t.goBack()})).catch((function(){}))}))},handleReturn:function(){var t=this;this.returnTitle="退回流程",Object(d["f"])({taskId:this.taskId}).then((function(e){t.returnTaskList=e.data,t.returnTaskList&&t.returnTaskList.length>0?t.returnOpen=!0:(t.returnOpen=!1,t.msgError("当前节点不可退回"))})).catch((function(){})),this.resetForm("returnForm")},handleReturnV2:function(){var t=this;this.returnTitle="退回流程",Object(d["g"])({taskId:this.taskId}).then((function(e){t.returnTaskList=[e.data],t.returnForm.targetKey=e.data.id,t.returnOpen=!0})).catch((function(){t.returnOpen=!1})),this.resetForm("returnForm")},submitReturnTask:function(){var t=this;this.$refs["returnForm"].validate((function(e){if(e){var r="taskId="+t.taskId+(t.returnForm.targetKey?"&targetKey="+t.returnForm.targetKey:"")+(t.returnForm.comment?"&comment="+t.returnForm.comment:"");Object(d["k"])(r).then((function(e){t.msgSuccess(e.msg),t.goBack()})).catch((function(){}))}}))},getFlowAuthSettingList:function(t){var e=this;Object(m["h"])(t).then((function(t){e.flowAuthSettingList=t.data}))}}},h=p,b=(r("649e"),r("0c7c")),g=Object(b["a"])(h,n,o,!1,null,"fe840754",null);e["default"]=g.exports}}]);