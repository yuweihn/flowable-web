(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4b320bc"],{1538:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return r})),n.d(t,"n",(function(){return s})),n.d(t,"o",(function(){return d})),n.d(t,"k",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"e",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"m",(function(){return w})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"i",(function(){return g}));var i=n("b775");function o(e){return Object(i["a"])({url:"/flowable/definition/list",method:"get",params:e})}function a(e){return Object(i["a"])({url:"/flowable/definition/info/by-deploy-id",method:"get",params:{deployId:e}})}function l(e,t){return Object(i["a"])({url:"/flowable/definition/start/"+e,method:"post",data:t})}function r(e){return Object(i["a"])({url:"/flowable/task/processVariables/"+e,method:"get"})}function s(e){return Object(i["a"])({url:"/flowable/definition/updateState",method:"put",params:e})}function d(e){return Object(i["a"])({url:"/flowable/definition/userList",method:"get",params:e})}function c(e){return Object(i["a"])({url:"/flowable/definition/roleList",method:"get",params:e})}function u(e){return Object(i["a"])({url:"/flowable/definition/readXml/"+e,method:"get"})}function h(e){return Object(i["a"])({url:"/flowable/task/flowViewer/"+e,method:"get"})}function f(e){return Object(i["a"])({url:"/flowable/definition/save",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:e})}function m(e){return Object(i["a"])({url:"/system/deployment",method:"post",data:e})}function w(e){return Object(i["a"])({url:"/system/deployment",method:"put",data:e})}function p(e){return Object(i["a"])({url:"/flowable/definition/"+e,method:"delete"})}function b(e){return Object(i["a"])({url:"/system/deployment/export",method:"get",params:e})}function g(e){return Object(i["a"])({url:"/flowable/definition/deploy-to-def-id",method:"get",params:e})}},"76e0":function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"k",(function(){return l})),n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"g",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return m}));var i=n("b775");function o(e){return Object(i["a"])({url:"/flowauth/widget/list",method:"get",params:e})}function a(e){return Object(i["a"])({url:"/flowauth/widget/create",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:e})}function l(e){return Object(i["a"])({url:"/flowauth/widget/update",method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:e})}function r(e){return Object(i["a"])({url:"/flowauth/widget/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:e})}function s(e){return Object(i["a"])({url:"/flowauth/node/list",method:"get",params:e})}function d(e){return Object(i["a"])({url:"/flowauth/node/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:e})}function c(e){return Object(i["a"])({url:"/flowauth/node/setting/list",method:"get",params:e})}function u(e,t,n){return Object(i["a"])({url:"/flowauth/node/setting/"+e+"/"+t,method:"post",data:n})}function h(e){return Object(i["a"])({url:"/flowauth/node/setting/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:e})}function f(e){return Object(i["a"])({url:"/flowauth/node/task/setting/list",method:"get",params:{taskId:e}})}function m(e){return Object(i["a"])({url:"/flowauth/node/start-task/setting/list",method:"get",params:{taskId:e}})}},"93e7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-dialog",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{title:"节点权限设置",visible:e.formVisible,width:"1000px","close-on-click-modal":!0},on:{"update:visible":function(t){e.formVisible=t}}},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"nodeForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[n("el-form-item",[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flow:auth:node:setting:list"],expression:"['flow:auth:node:setting:list']"}],attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")])],1)],1),n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flow:auth:node:setting:delete"],expression:"['flow:auth:node:setting:delete']"}],attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),n("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getFlowAuthNodeSettingList}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.settingList},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"expand",width:"18"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"流程定义ID："}},[n("span",[e._v(e._s(t.row.procDefId))])]),n("el-form-item",{attrs:{label:"节点Key："}},[n("span",[e._v(e._s(t.row.nodeKey))])]),n("el-form-item",{attrs:{label:"节点名称："}},[n("span",[e._v(e._s(t.row.nodeName))])]),n("el-form-item",{attrs:{label:"组件ID："}},[n("span",[e._v(e._s(t.row.widgetId))])]),n("el-form-item",{attrs:{label:"组件编码："}},[n("span",[e._v(e._s(t.row.widgetCode))])]),n("el-form-item",{attrs:{label:"组件名称："}},[n("span",[e._v(e._s(t.row.widgetName))])]),n("el-form-item",{attrs:{label:"可见："}},[n("span",[n("el-checkbox",{attrs:{disabled:""},model:{value:t.row.viewable,callback:function(n){e.$set(t.row,"viewable",n)},expression:"scope.row.viewable"}})],1)]),n("el-form-item",{attrs:{label:"可编辑："}},[n("span",[n("el-checkbox",{attrs:{disabled:""},model:{value:t.row.editable,callback:function(n){e.$set(t.row,"editable",n)},expression:"scope.row.editable"}})],1)])],1)]}}])}),n("el-table-column",{attrs:{type:"selection",selectable:function(e){return!e.valid},width:"55",align:"center"}}),n("el-table-column",{attrs:{label:"组件编码",prop:"widgetCode","show-overflow-tooltip":!0,width:"180px"}}),n("el-table-column",{attrs:{label:"组件名称",prop:"widgetName","show-overflow-tooltip":!0,width:"400px"}}),n("el-table-column",{attrs:{label:"可见",prop:"viewable",width:"90px"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-checkbox",{attrs:{scope:t,indeterminate:e.viewIndeterminate},on:{change:e.handleChangeView},model:{value:e.checkAllViewable,callback:function(t){e.checkAllViewable=t},expression:"checkAllViewable"}},[e._v(" 可见 ")])]}},{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:e.tableCheckboxChange},model:{value:t.row.viewable,callback:function(n){e.$set(t.row,"viewable",n)},expression:"scope2.row.viewable"}})]}}])}),n("el-table-column",{attrs:{label:"可编辑",prop:"editable",width:"100px"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-checkbox",{attrs:{scope:t,indeterminate:e.editIndeterminate},on:{change:e.handleChangeEdit},model:{value:e.checkAllEditable,callback:function(t){e.checkAllEditable=t},expression:"checkAllEditable"}},[e._v(" 可编辑 ")])]}},{key:"default",fn:function(t){return[n("el-checkbox",{on:{change:e.tableCheckboxChange},model:{value:t.row.editable,callback:function(n){e.$set(t.row,"editable",n)},expression:"scope2.row.editable"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.valid?e._e():n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flow:auth:node:setting:delete"],expression:"['flow:auth:node:setting:delete']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])}),n("el-table-column")],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.saveChange}},[e._v("保存")]),n("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("取 消")])],1)],1)],1)},o=[],a=(n("4de4"),n("d81d"),n("d3b7"),n("25f0"),n("159b"),n("76e0")),l={name:"FlowAuthNodeSetting",data:function(){return{formVisible:!1,loading:!1,procDefId:null,nodeKey:null,ids:[],multiple:!0,showSearch:!0,queryParams:{},settingList:[],viewIndeterminate:!1,editIndeterminate:!1,checkAllViewable:!1,checkAllEditable:!1}},created:function(){},mounted:function(){},methods:{show:function(e){this.procDefId=e.procDefId,this.nodeKey=e.nodeKey,this.formVisible=!0,this.getFlowAuthNodeSettingList()},getFlowAuthNodeSettingList:function(){var e=this,t={procDefId:this.procDefId,nodeKey:this.nodeKey};this.loading=!0,Object(a["g"])(t).then((function(t){e.settingList=t.data,e.loading=!1,e.tableCheckboxChange()})).catch((function(t){e.settingList=[],e.loading=!1}))},handleQuery:function(){this.getFlowAuthNodeSettingList()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})).filter((function(e){return e})),this.multiple=!this.ids.length},handleDelete:function(e){var t=e.id||this.ids.toString();if(t){var n={ids:t},i=this;i.$confirm("是否确认删除选中记录?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["c"])(n).then((function(e){i.$message({type:"success",message:e.msg}),i.getFlowAuthNodeSettingList()}))})).catch((function(){}))}else this.$message.error("未选择数据项")},handleChangeView:function(e){e?(this.settingList.forEach((function(e){e.viewable=!0})),this.viewIndeterminate=!1):(this.settingList.forEach((function(e){e.viewable=!1})),this.viewIndeterminate=!1)},handleChangeEdit:function(e){e?(this.settingList.forEach((function(e){e.editable=!0})),this.editIndeterminate=!1):(this.settingList.forEach((function(e){e.editable=!1})),this.editIndeterminate=!1)},tableCheckboxChange:function(){var e=this;setTimeout((function(){var t=e.settingList.every((function(e){return!0===e.viewable})),n=e.settingList.every((function(e){return!1===e.viewable||null===e.viewable})),i=e.settingList.every((function(e){return!0===e.editable})),o=e.settingList.every((function(e){return!1===e.editable||null===e.editable}));t?(e.viewIndeterminate=!1,e.checkAllViewable=!0):n?(e.viewIndeterminate=!1,e.checkAllViewable=!1):(e.checkAllViewable=!1,e.viewIndeterminate=!0),i?(e.editIndeterminate=!1,e.checkAllEditable=!0):o?(e.editIndeterminate=!1,e.checkAllEditable=!1):(e.checkAllEditable=!1,e.editIndeterminate=!0)}),0)},saveChange:function(){var e=this,t=[];this.settingList.forEach((function(e){t.push({widgetId:e.widgetId,viewable:!!e.viewable,editable:!!e.editable})})),Object(a["j"])(this.procDefId,this.nodeKey,t).then((function(t){200==t.code?(e.$message({type:"success",message:"保存成功"}),e.formVisible=!1):e.$message.error(t.msg)}))}}},r=l,s=n("0c7c"),d=Object(s["a"])(r,i,o,!1,null,null,null);t["default"]=d.exports},b2ac:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"nodeForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[n("el-form-item",[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flow:auth:node:list"],expression:"['flow:auth:node:list']"}],attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-caret-left",size:"mini"},on:{click:e.goBack}},[e._v("返回")])],1)],1),n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flow:auth:node:delete"],expression:"['flow:auth:node:delete']"}],attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),n("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getFlowAuthNodeList}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.nodeList},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"expand",width:"18"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"流程定义ID："}},[n("span",[e._v(e._s(t.row.procDefId))])]),n("el-form-item",{attrs:{label:"节点Key："}},[n("span",[e._v(e._s(t.row.nodeKey))])]),n("el-form-item",{attrs:{label:"节点名称："}},[n("span",[e._v(e._s(t.row.nodeName))])])],1)]}}])}),n("el-table-column",{attrs:{type:"selection",selectable:function(e){return!e.valid},width:"55",align:"center"}}),n("el-table-column",{attrs:{label:"流程定义ID",prop:"procDefId","show-overflow-tooltip":!0,width:"400px"}}),n("el-table-column",{attrs:{label:"节点Key",prop:"nodeKey","show-overflow-tooltip":!0,width:"160px"}}),n("el-table-column",{attrs:{label:"节点名称",prop:"nodeName","show-overflow-tooltip":!0,width:"160px"}}),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flow:auth:node:setting:list"],expression:"['flow:auth:node:setting:list']"}],attrs:{size:"mini",type:"text",icon:"el-icon-files"},on:{click:function(n){return e.$refs.editNodeSettings.show(t.row)}}},[e._v("节点组件")]),t.row.valid?e._e():n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flow:auth:node:delete"],expression:"['flow:auth:node:delete']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])}),n("el-table-column")],1),n("edit-settings",{ref:"editNodeSettings",on:{success:e.getFlowAuthNodeList}})],1)},o=[],a=(n("4de4"),n("d81d"),n("d3b7"),n("25f0"),n("76e0")),l=n("1538"),r=n("93e7"),s={name:"FlowAuthNode",components:{"edit-settings":r["default"]},data:function(){return{deployId:null,procDefId:null,loading:!0,nodeKeys:[],multiple:!0,showSearch:!0,queryParams:{},nodeList:[]}},created:function(){this.loading=!1,this.deployId=this.$route.query&&this.$route.query.deployId,this.deployId&&(this.getProcDefIdByDeployId(),this.getFlowAuthNodeList())},mounted:function(){},methods:{getProcDefIdByDeployId:function(){var e=this;if(this.deployId){var t={deployId:this.deployId};Object(l["i"])(t).then((function(t){e.procDefId=t.data})).catch((function(t){e.$message.error("查询流程定义ID失败")}))}else this.procDefId=null},getFlowAuthNodeList:function(){var e=this;if(!this.deployId)return this.nodeList=[],void(this.loading=!1);var t={deployId:this.deployId};this.loading=!0,Object(a["f"])(t).then((function(t){e.nodeList=t.data,e.loading=!1})).catch((function(t){e.loading=!1}))},handleQuery:function(){this.getFlowAuthNodeList()},handleSelectionChange:function(e){this.nodeKeys=e.map((function(e){return e.nodeKey})).filter((function(e){return e})),this.multiple=!this.nodeKeys.length},handleDelete:function(e){var t=e.nodeKey||this.nodeKeys.toString(),n={procDefId:this.procDefId,nodeKeys:t},i=this;i.$confirm("是否确认删除选中记录?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["b"])(n).then((function(e){i.$message({type:"success",message:e.msg}),i.getFlowAuthNodeList()}))})).catch((function(){}))},goBack:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.go(-1)}}},d=s,c=n("0c7c"),u=Object(c["a"])(d,i,o,!1,null,null,null);t["default"]=u.exports}}]);