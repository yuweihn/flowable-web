(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ab8c066"],{"13d5":function(t,e,n){"use strict";var r=n("23e7"),o=n("d58f").left,a=n("a640"),i=n("ae40"),u=n("2d00"),s=n("605d"),c=a("reduce"),l=i("reduce",{1:0}),d=!s&&u>79&&u<83;r({target:"Array",proto:!0,forced:!c||!l||d},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1538:function(t,e,n){"use strict";n.d(e,"h",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"g",(function(){return u})),n.d(e,"n",(function(){return s})),n.d(e,"o",(function(){return c})),n.d(e,"k",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"l",(function(){return m})),n.d(e,"a",(function(){return p})),n.d(e,"m",(function(){return h})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return w})),n.d(e,"i",(function(){return y}));var r=n("b775");function o(t){return Object(r["a"])({url:"/flowable/definition/list",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/flowable/definition/info/by-deploy-id",method:"get",params:{deployId:t}})}function i(t,e){return Object(r["a"])({url:"/flowable/definition/start/"+t,method:"post",data:e})}function u(t){return Object(r["a"])({url:"/flowable/task/processVariables/"+t,method:"get"})}function s(t){return Object(r["a"])({url:"/flowable/definition/updateState",method:"put",params:t})}function c(t){return Object(r["a"])({url:"/flowable/definition/userList",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/flowable/definition/roleList",method:"get",params:t})}function d(t){return Object(r["a"])({url:"/flowable/definition/readXml/"+t,method:"get"})}function f(t){return Object(r["a"])({url:"/flowable/task/flowViewer/"+t,method:"get"})}function m(t){return Object(r["a"])({url:"/flowable/definition/save",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function p(t){return Object(r["a"])({url:"/system/deployment",method:"post",data:t})}function h(t){return Object(r["a"])({url:"/system/deployment",method:"put",data:t})}function b(t){return Object(r["a"])({url:"/flowable/definition/"+t,method:"delete"})}function w(t){return Object(r["a"])({url:"/system/deployment/export",method:"get",params:t})}function y(t){return Object(r["a"])({url:"/flowable/definition/deploy-to-def-id",method:"get",params:t})}},2638:function(t,e,n){"use strict";function r(){return r=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)}var o=["attrs","props","domProps"],a=["class","style","directives"],i=["on","nativeOn"],u=function(t){return t.reduce((function(t,e){for(var n in e)if(t[n])if(-1!==o.indexOf(n))t[n]=r({},t[n],e[n]);else if(-1!==a.indexOf(n)){var u=t[n]instanceof Array?t[n]:[t[n]],c=e[n]instanceof Array?e[n]:[e[n]];t[n]=u.concat(c)}else if(-1!==i.indexOf(n))for(var l in e[n])if(t[n][l]){var d=t[n][l]instanceof Array?t[n][l]:[t[n][l]],f=e[n][l]instanceof Array?e[n][l]:[e[n][l]];t[n][l]=d.concat(f)}else t[n][l]=e[n][l];else if("hook"==n)for(var m in e[n])t[n][m]=t[n][m]?s(t[n][m],e[n][m]):e[n][m];else t[n]=e[n];else t[n]=e[n];return t}),{})},s=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}};t.exports=u},"3ab9":function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"k",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"n",(function(){return u})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"i",(function(){return f})),n.d(e,"g",(function(){return m})),n.d(e,"l",(function(){return p})),n.d(e,"m",(function(){return h})),n.d(e,"h",(function(){return b}));var r=n("b775");function o(t){return Object(r["a"])({url:"/flowable/form/list",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/flowable/form/"+t,method:"get"})}function i(t){return Object(r["a"])({url:"/flowable/form",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/flowable/form",method:"put",data:t})}function s(t){return Object(r["a"])({url:"/flowable/form/addDeployForm",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/flowable/form/"+t,method:"delete"})}function l(t){return Object(r["a"])({url:"/flowable/form/export",method:"get",params:t})}function d(t){return Object(r["a"])({url:"/system/customer/option-list",method:"get",params:t})}function f(t){return Object(r["a"])({url:"/system/order/drop-down-list",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/system/impl/order/related/info",method:"get",params:t})}function p(t){return Object(r["a"])({url:"/system/order/info",method:"get",params:t})}function h(t){return Object(r["a"])({url:"/system/order/customer/unbound-contract/order/drop-down-list",method:"get",params:t})}function b(t){return Object(r["a"])({url:"/system/config/ags-company/drop-down-list",method:"get",params:t})}},"589b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("bpmn-modeler",{ref:"refNode",attrs:{xml:t.xmlData,"is-view":!0,taskList:t.taskData}})],1)},o=[],a=n("ae3a"),i={name:"Flow",components:{bpmnModeler:a["a"]},props:{xmlData:{type:String,default:""},taskData:{type:Array,default:function(){return[]}}},data:function(){return{}}},u=i,s=n("0c7c"),c=Object(s["a"])(u,r,o,!1,null,null,null);e["default"]=c.exports},"5f4d":function(t,e,n){"use strict";n("93a5")},"5fd5":function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return c}));var r=n("b775");function o(t){return Object(r["a"])({url:"/system/customer/list",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/system/sale/customer/list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/system/customer/create",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function u(t){return Object(r["a"])({url:"/system/customer/update",method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function s(t){return Object(r["a"])({url:"/system/customer/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:t})}function c(t){return Object(r["a"])({url:"/system/customer/sale-customers",method:"get",params:t})}},6881:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n("b775");function o(){return Object(r["a"])({url:"/system/product/port/options",method:"get",params:{}})}function a(){return Object(r["a"])({url:"/system/product/device/options",method:"get",params:{}})}},"6e55":function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"h",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"i",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return f}));var r=n("b775");n("3fd3");function o(t){return Object(r["a"])({url:"/flowable/task/finishedList",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/flowable/task/flowRecord",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/flowable/task/form",method:"get",params:t})}function u(t){return Object(r["a"])({url:"/flowable/task/revokeProcess",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/system/deployment/"+t,method:"get"})}function c(t){return Object(r["a"])({url:"/system/deployment",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/system/deployment",method:"put",data:t})}function d(t){return Object(r["a"])({url:"/system/deployment/"+t,method:"delete"})}function f(t){return Object(r["a"])({url:"/system/deployment/export",method:"get",params:t})}},"76e0":function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"k",(function(){return i})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"h",(function(){return m})),n.d(e,"i",(function(){return p}));var r=n("b775");function o(t){return Object(r["a"])({url:"/flowauth/widget/list",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/flowauth/widget/create",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function i(t){return Object(r["a"])({url:"/flowauth/widget/update",method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},data:t})}function u(t){return Object(r["a"])({url:"/flowauth/widget/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:t})}function s(t){return Object(r["a"])({url:"/flowauth/node/list",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/flowauth/node/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:t})}function l(t){return Object(r["a"])({url:"/flowauth/node/setting/list",method:"get",params:t})}function d(t,e,n){return Object(r["a"])({url:"/flowauth/node/setting/"+t+"/"+e,method:"post",data:n})}function f(t){return Object(r["a"])({url:"/flowauth/node/setting/delete",method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},params:t})}function m(t){return Object(r["a"])({url:"/flowauth/node/task/setting/list",method:"get",params:{taskId:t}})}function p(t){return Object(r["a"])({url:"/flowauth/node/start-task/setting/list",method:"get",params:{taskId:t}})}},"80b9":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"表单信息",name:"first"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("span",{staticClass:"el-icon-document"},[t._v("表单信息")])]),n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.goBack}},[t._v("返回")]),t.isCopy?n("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary",size:"small",plain:""},on:{click:t.copyData}},[t._v("复制")]):t._e()],1),n("el-col",{attrs:{span:20,offset:2}},[n("div",[n("parser",{key:(new Date).getTime(),attrs:{"form-conf":t.formConf}})],1),"order"==t.isShow?n("div",[n("orderForm",{attrs:{formValue:t.formData,flowAuthSettingList:t.flowAuthSettingList,isStart:t.isStart,isDetail:t.isDetail,detailType:t.detailType}})],1):t._e(),"contract"==t.isShow?n("div",[n("contractForm",{attrs:{formValue:t.formData,flowAuthSettingList:t.flowAuthSettingList,isStart:t.isStart,isDetail:t.isDetail,detailType:t.detailType}})],1):t._e(),"impl"==t.isShow?n("div",[n("implForm",{attrs:{formValue:t.formData,flowAuthSettingList:t.flowAuthSettingList,isStart:t.isStart,isDetail:t.isDetail,detailType:t.detailType}})],1):t._e()])],1)],1),n("el-tab-pane",{attrs:{label:"审批记录",name:"second"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("span",{staticClass:"el-icon-notebook-1"},[t._v("审批记录")])]),t.flowRecordList?n("el-card",{staticClass:"box-card"},[n("el-col",{attrs:{span:16,offset:4}},[n("div",{staticClass:"block"},[n("el-timeline",t._l(t.flowRecordList,(function(e,r){return n("el-timeline-item",{key:r,attrs:{icon:t.setIcon(e.finishTime),color:t.setColor(e.finishTime)}},[n("p",{staticStyle:{"font-weight":"700"}},[t._v(t._s(e.taskName))]),n("el-card",{attrs:{"body-style":{padding:"10px"}}},[e.assigneeName?n("label",{staticStyle:{"font-weight":"normal","margin-right":"30px"}},[t._v("实际办理： "+t._s(e.assigneeName)+" "),n("el-tag",{attrs:{type:"info",size:"mini"}},[t._v(t._s(e.deptName))])],1):t._e(),e.candidate?n("label",{staticStyle:{"font-weight":"normal","margin-right":"30px"}},[t._v("候选办理： "+t._s(e.candidate))]):t._e(),n("label",{staticStyle:{"font-weight":"normal"}},[t._v("接收时间： ")]),n("label",{staticStyle:{color:"#8a909c","font-weight":"normal"}},[t._v(t._s(t.parseTime(e.createTime)))]),e.finishTime?n("label",{staticStyle:{"margin-left":"30px","font-weight":"normal"}},[t._v("办结时间： ")]):t._e(),n("label",{staticStyle:{color:"#8a909c","font-weight":"normal"}},[t._v(t._s(t.parseTime(e.finishTime)))]),e.duration?n("label",{staticStyle:{"margin-left":"30px","font-weight":"normal"}},[t._v("耗时： ")]):t._e(),n("label",{staticStyle:{color:"#8a909c","font-weight":"normal"}},[t._v(t._s(e.duration))]),e.comment?n("p",["1"===e.comment.type?n("el-tag",{attrs:{type:"success"}},[t._v(" "+t._s(e.comment.comment))]):t._e(),"2"===e.comment.type?n("el-tag",{attrs:{type:"warning"}},[t._v(" "+t._s(e.comment.comment))]):t._e(),"3"===e.comment.type?n("el-tag",{attrs:{type:"danger"}},[t._v(" "+t._s(e.comment.comment))]):t._e()],1):t._e()])],1)})),1)],1)])],1):t._e()],1),n("el-tab-pane",{attrs:{label:"流程图",name:"third"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("span",{staticClass:"el-icon-picture-outline"},[t._v("流程图")])]),n("el-card",{staticClass:"box-card"},["third"==t.activeName?n("flow",{attrs:{xmlData:t.xmlData,taskData:t.taskList}}):t._e()],1)],1)],1)],1)},o=[],a=(n("d3b7"),n("6e55")),i=n("9f75"),u=n("fd31"),s=n("872a"),c=n("319d"),l=n("1538"),d=n("589b"),f=n("76e0"),m={name:"FlowDetail",components:{parser:i["a"],flow:d["default"],orderForm:u["a"],contractForm:s["a"],implForm:c["a"]},data:function(){return{formConf:{},flowRecordList:[],xmlData:"",taskList:[],isShow:"order",formData:{},isStart:!1,isDetail:!0,flowAuthSettingList:[],detailType:"",activeName:"first",isCopy:!1,deployId:null,taskId:null}},created:function(){},mounted:function(){var t=this;this.deployId=this.$route.query&&this.$route.query.deployId,this.taskId=this.$route.query&&this.$route.query.taskId;var e=this.$route.query&&this.$route.query.category,n=this.$route.query&&this.$route.query.detailType,r=this.$route.query&&this.$route.query.procInsId;this.isShow=e,this.detailType=n,"myProcess"==n?this.getStartNodeFlowAuthSettingList(this.taskId):"completedTasks"==n?(this.getFlowAuthSettingList(this.taskId),this.isCopy=!0):"allProcess"==n&&(this.detailType="allProcess"),this.processVariables(this.taskId),this.getFlowRecordList(r),this.getFlowViewer(r).then((function(e){t.getModelDetail(t.deployId)}))},methods:{getFlowViewer:function(t){var e=this;return new Promise((function(n,r){Object(l["e"])(t).then((function(t){e.taskList=t.data,n(e.taskList)})).catch((function(t){r()}))}))},getModelDetail:function(t){var e=this;return new Promise((function(n,r){Object(l["j"])(t).then((function(t){e.xmlData=t.data,n(e.xmlData)})).catch((function(t){r()}))}))},setIcon:function(t){return t?"el-icon-check":"el-icon-time"},setColor:function(t){return t?"#2bc418":"#b3bdbb"},getFlowRecordList:function(t){var e=this,n={procInsId:t};Object(a["f"])(n).then((function(t){e.flowRecordList=t.data})).catch((function(t){e.goBack()}))},processVariables:function(t){var e=this;t&&Object(l["g"])(t).then((function(t){e.formConf=t.data.variables,e.formData=t.data})).catch((function(){e.$message.error(err.message)}))},goBack:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.go(-1)},getFlowAuthSettingList:function(t){var e=this;Object(f["h"])(t).then((function(t){e.flowAuthSettingList=t.data}))},getStartNodeFlowAuthSettingList:function(t){var e=this;Object(f["i"])(t).then((function(t){e.flowAuthSettingList=t.data}))},copyData:function(){this.$router.push({path:"/flowable/task/start",query:{taskId:this.taskId,deployId:this.deployId,procDefId:null,formType:null}})}}},p=m,h=(n("5f4d"),n("0c7c")),b=Object(h["a"])(p,r,o,!1,null,"359ec3f3",null);e["default"]=b.exports},"93a5":function(t,e,n){},9977:function(t,e,n){var r={"./el-button.js":"aace","./el-checkbox-group.js":"9413","./el-input.js":"167d","./el-radio-group.js":"2cfa","./el-select.js":"7f29","./el-upload.js":"0f88"};function o(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=a,t.exports=o,o.id="9977"},c0c7:function(t,e,n){"use strict";n.d(e,"i",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return u})),n.d(e,"k",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"g",(function(){return m})),n.d(e,"l",(function(){return p})),n.d(e,"m",(function(){return h})),n.d(e,"n",(function(){return b})),n.d(e,"h",(function(){return w})),n.d(e,"f",(function(){return y}));var r=n("b775"),o=n("c38a");function a(t){return Object(r["a"])({url:"/system/user/list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/system/user/"+Object(o["f"])(t),method:"get"})}function u(t){return Object(r["a"])({url:"/system/user",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/system/user",method:"put",data:t})}function c(t){return Object(r["a"])({url:"/system/user/"+t,method:"delete"})}function l(t){return Object(r["a"])({url:"/system/user/export",method:"get",params:t})}function d(t,e){var n={userId:t,password:e};return Object(r["a"])({url:"/system/user/resetPwd",method:"put",data:n})}function f(t,e){var n={userId:t,status:e};return Object(r["a"])({url:"/system/user/changeStatus",method:"put",data:n})}function m(){return Object(r["a"])({url:"/system/user/profile",method:"get"})}function p(t){return Object(r["a"])({url:"/system/user/profile",method:"put",data:t})}function h(t,e){var n={oldPassword:t,newPassword:e};return Object(r["a"])({url:"/system/user/profile/updatePwd",method:"put",params:n})}function b(t){return Object(r["a"])({url:"/system/user/profile/avatar",method:"post",data:t})}function w(){return Object(r["a"])({url:"/system/user/importTemplate",method:"get"})}function y(t){return Object(r["a"])({url:"/system/user/role-user/drop-down-list",method:"get",params:t})}},d58f:function(t,e,n){var r=n("1c0b"),o=n("7b0b"),a=n("44ad"),i=n("50c4"),u=function(t){return function(e,n,u,s){r(n);var c=o(e),l=a(c),d=i(c.length),f=t?d-1:0,m=t?-1:1;if(u<2)while(1){if(f in l){s=l[f],f+=m;break}if(f+=m,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=m)f in l&&(s=n(s,l[f],f,c));return s}};t.exports={left:u(!1),right:u(!0)}}}]);